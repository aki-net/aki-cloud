# CoreDNS container

Authoritative-only CoreDNS instance templated by the backend.

- Dockerfile wraps `coredns/coredns:1.11.1` with a small launcher script (`coredns-start.sh`).
- Config path: `/data/dns/Corefile` with zone files in `/data/dns/zones/*.zone`.
- Host network mode ensures binding to chosen NS IPs (configured via `.env`).
- Reload behaviour: Corefile is touched by `scripts/reload_coredns.sh`; zone files are watched via the CoreDNS `reload` directive in the rendered template.
- Hardened defaults: reduced EDNS buffer (`bufsize`), `minimal` answers, in-process caching with success/denial TTLs, and optional query logging (`COREDNS_QUERY_LOG=true`).

## Manual run

```bash
docker build -t aki-coredns .
docker run --rm --network host -v $(pwd)/../data:/data aki-coredns
```

Ensure the data directory already contains a rendered Corefile/zone files (generated by `/app/bin/generate coredns`).
